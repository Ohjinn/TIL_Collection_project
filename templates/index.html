<!DOCTYPE html>
<html lang="ko">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="shortcut icon" href="/static/images/favicon.png">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
          crossorigin="anonymous">

    <!-- JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>

    <!-- 구글폰트 -->
    <link href="https://fonts.googleapis.com/css?family=Stylish&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='Til.css') }}">
    <script type="text/javascript" src="{{ url_for('static', filename='Til.js') }}"></script>

    <title>TIL 뭐시당가</title>
    <style type="text/css">
    </style>
    <script defer src="https://use.fontawesome.com/releases/v5.15.2/js/all.js"
            integrity="sha384-vuFJ2JiSdUpXLKGK+tDteQZBqNlMwAjhZ3TvPaDfN9QmbPb7Q8qUpbSNapQev3YF"
            crossorigin="anonymous"></script>

    <script>

        function showLocation(position) {   // 위치 정보 호출 성공시
            let latitude = position.coords.latitude   // 위도
            let longitude = position.coords.longitude  // 경도

            let apiKey = '97329c7c315676010b49d9b9dc79185c';
            let weatherUrl = "https://api.openweathermap.org/data/2.5/weather?lat=" + latitude
                + "&lon=" + longitude
                + "&appid=" + apiKey;
            let options = {method: 'GET'}
            $.ajax(weatherUrl, options).then((response) => {
                console.log(response)
                let icon = response.weather[0].icon
                let iconUrl = "http://openweathermap.org/img/wn/" + icon + "@2x.png"
                let img = document.querySelector("#wicon")
                img.src = iconUrl
                $("#tempr").text(parseInt(response.main.temp - 273) + '˚'); // 현재 온도
            }).catch((error) => {
                console.log(error)
            })

            // $.ajax({
            //     type: "GET",
            //     url: "https://api.openweathermap.org/data/2.5/weather?lat=" + latitude
            //         + "&lon=" + longitude
            //         + "&appid=" + apiKey,
            //     data: {},
            //     success: function (response) {
            //         let icon = response["weather"]["icon"];
            //         let currentTemperature = response["main"]["temp"]-273;
            //         let iconUrl = "http://openweathermap.org/img/wn/" + icon + "@2x.png";
            //         let img = document.querySelector("#wicon");
            //         img.src = iconUrl;
            //         let temp_html = `${currentTemperature}<span class="tempr" id="weather tempr"></span></div><div class="weather">${img.src}<img class="wicon" id="weather wicon" src="">`;
            //         console.log(temp_html);
            //         $('#weather').append(temp_html);
            // $("#tempr").text(parseInt(response.main.temp - 273) + '˚');
            //     }
            // })
        }

        function showError(position) {
            // 실패 했을 때 처리
            alert("위치 정보를 얻을 수 없습니다.")
        }

        window.addEventListener('load', () => {
            if (window.navigator.geolocation) {
                window.navigator.geolocation.getCurrentPosition(showLocation, showError)
            }
        })

    </script>
</head>
<body>
<div class="wrap">
    <!-- 로고 이미지 -->
    <div class="banner" onclick="window.location.href = '/'">
    </div>
    <!--날씨 배너-->
    <div style="margin: 30px 0px 20px 0px">
        <div class="weather"><h3>날씨</h3></div>
        <div class="weather" id = "weather">기온<span class="tempr" id="tempr"></span></div>
        <div class="weather">이미지<img class="wicon" id="wicon" src=""></div>
    </div>
    <!--검색-->
    <div class="input-group mb-3 searchbar">
        <input type="text" class="form-control" placeholder="이름을 입력하세요" style="text-align: center;">
        <div class="input-group-append">
            <button id="searchButton" class="btn btn-info" type="submit">검색</button>
        </div>
    </div>
    <!-- 블로그 카드 띄우기 -->
    <div id="flush">
        <div>
            <div type="button" class="btn btn-info btn-lg" style="margin: 10px;">Velog</div>
            <div class="row">
                <div class="card hotboxs">
                    <img class="card-img-top card-rows" src="../static/tistoryImage.ico" alt="Card image cap">
                    <div class="card-body">
                        <h5 class="card-title">이름</h5>
                        <p class="card-text">주소</p>
                        <a href="#" class="btn btn-dark">Go somewhere</a>
                    </div>
                </div>
                <div class="card hotboxs">
                    <img class="card-img-top card-rows" src="../static/tistoryImage.ico" alt="Card image cap">
                    <div class="card-body">
                        <h5 class="card-title">이름</h5>
                        <p class="card-text">주소</p>
                        <a href="#" class="btn btn-dark">Go somewhere</a>
                    </div>
                </div>
                <div class="card hotboxs">
                    <img class="card-img-top card-rows" src="../static/tistoryImage.ico" alt="Card image cap">
                    <div class="card-body">
                        <h5 class="card-title">이름</h5>
                        <p class="card-text">주소</p>
                        <a href="#" class="btn btn-dark">Go somewhere</a>
                    </div>
                </div>
                <div class="card hotboxs">
                    <img class="card-img-top card-rows" src="../static/tistoryImage.ico" alt="Card image cap">
                    <div class="card-body">
                        <h5 class="card-title">이름</h5>
                        <p class="card-text">주소</p>
                        <a href="#" class="btn btn-dark">Go somewhere</a>
                    </div>
                </div>
                <div class="card hotboxs">
                    <img class="card-img-top card-rows" src="../static/tistoryImage.ico" alt="Card image cap">
                    <div class="card-body">
                        <h5 class="card-title">이름</h5>
                        <p class="card-text">주소</p>
                        <a href="#" class="btn btn-dark">Go somewhere</a>
                    </div>
                </div>
                <div class="card hotboxs">
                    <img class="card-img-top card-rows" src="../static/tistoryImage.ico" alt="Card image cap">
                    <div class="card-body">
                        <h5 class="card-title">이름</h5>
                        <p class="card-text">주소</p>
                        <a href="#" class="btn btn-dark">Go somewhere</a>
                    </div>
                </div>
            </div>
        </div>
        <div>
            <div type="button" class="btn btn-info btn-lg" style="margin: 10px;">Tistory</div>
            <div class="row">

            </div>
        </div>
        <div>
            <div type="button" class="btn btn-info btn-lg" style="margin: 10px; float: none">Others</div>
            <div>

            </div>
        </div>
    </div>
</div>
</body>
</html>